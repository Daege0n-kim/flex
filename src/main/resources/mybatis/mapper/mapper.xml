<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTO Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.pg.flex.dao.TestDao">

  <resultMap id="UserResultMap" type="com.pg.flex.dto.User">
    <result column="login_id" property="loginId" />
    <result column="login_password" property="loginPassword" />
    <result column="user_name" property="userName" />
    <result column="user_id" property="userId" />
  </resultMap>

  <select id="getAllUser" resultType="com.pg.flex.dto.User">
    select
      *
    from   
      UserProfile
  </select>

  <select id="login" parameterType="com.pg.flex.dto.User" resultMap="UserResultMap">
    SELECT
      *
    FROM
      user_info
    WHERE
      login_id = #{loginId}
    AND
      login_password = #{loginPassword}
  </select>

  <insert id="signUp">
    INSERT INTO user_info
      (login_id, login_password, user_name, user_id)
    VALUES
      (#{loginId}, #{loginPassword}, #{userName}, #{userId})
  </insert>

  <select id="checkId" parameterType="com.pg.flex.dto.User" resultType="int">
    SELECT 
      COUNT(*)
    FROM
      UserProfile
    WHERE
      id = #{id}
  </select>
</mapper>