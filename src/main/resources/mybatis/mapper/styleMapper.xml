<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTO Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.pg.flex.dao.StyleDao">

  <resultMap id="StyleResultMap" type="com.pg.flex.dto.Style">
    <result column="user_id" property="userId" />
    <result column="post_content" property="postContent" />
    <result column="like_count" property="likeCount" />
    <result column="comment_count" property="commentCount" />
  </resultMap>

  
  <!-- style post가져오기 -->
  <select id="getPosts" resultMap="StyleResultMap">
    SELECT
      u.user_id, 
      p.post_content, 
      p.like_count, 
      (select count(*) from comment where post_index = p.post_index) AS comment_count
    FROM 
      posting AS p
    INNER JOIN 
      user_info AS u
    ON
      p.login_id = u.login_id;
  </select>
</mapper>